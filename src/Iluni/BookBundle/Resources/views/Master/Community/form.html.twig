{% extends 'IluniBookBundle:Common:layout/standard.html.twig' %}
{% import 'IluniBookBundle:Common:macro/crud.html.twig' as crud %}
{% set is_new   = entity.id ? false : true %}
{% set title    = (is_new ? 'Add' : 'Update')|trans({},'actions') %}
{% set button   = (is_new ? 'Create' : 'Save')|trans({},'actions') %}

{% set path = is_new ?
    path('community_create', { 'id': app.request.attributes.get('id') }) :
    path('community_update',{ 'id': entity.id })
%}
{% block title %}Community :: {{ title }}{% endblock %}

{% block body %}
    {% if ld3 is defined %}
        {% set form_holder_name = edit_form.vars.name %}
        {% include 'IluniBookBundle:Shared/Javascript:dynamic_dropdown.html.twig' %}
    {% endif %}

    {% set form_id = edit_form.vars.name %}

    <script type="text/javascript">
        window.addEvent("domready",function(){
            document.id('{{ form_id }}_name').addClass('required');
            document.id('{{ form_id }}_program').addClass('required');
            document.id('{{ form_id }}_department').addClass('required');
            document.id('{{ form_id }}_faculty').addClass('required');
            new FormValidator.Inline('form_validate');
        });
    </script>

    <form action="{{ path }}" method="post" id="form_validate" {{ form_enctype(edit_form) }}>
        {{ form_widget(edit_form) }}
        &nbsp;
        {{ crud.link_to_backtolist('community', {}) }}
        <button type="submit">{{ button }}</button>
    </form>

    {% if not is_new %}
        {{ crud.form_delete(delete_form, 'community_delete', { 'id': entity.id }) }}
    {% endif %}
{% endblock %}
